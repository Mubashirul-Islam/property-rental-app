{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Property Grid</title>
    <link rel="stylesheet" href="{% static 'property_grid.css' %}" />
  </head>
  <body>
    <main class="page">
      <header class="header">
        <div>
          <h1>Stay a while</h1>
          <p>Browse every active rental in a clean, modern grid.</p>
        </div>
      </header>

      {% if properties %}
      <section class="grid">
        {% for property in properties %}
        <article class="card" data-index="{{ forloop.counter0 }}">
          <div class="image-wrap">
            {% if property.primary_image %}
            <img
              src="{{ property.primary_image.url }}"
              alt="{{ property.title }}"
            />
            {% else %}
            <div class="badge">No image</div>
            {% endif %}
            <div class="badge">${{ property.price_per_night }} / night</div>
          </div>
          <div class="content">
            <h2 class="title">{{ property.title }}</h2>
            <div class="meta">
              {% if property.location %} 
              {{ property.location.city }}, {{ property.location.country }} 
              {% else %} 
              Location pending 
              {% endif %}
            </div>
            <div class="stats">
              <div class="stat">{{ property.bedrooms }} beds</div>
              <div class="stat">{{ property.bathrooms }} baths</div>
              <div class="stat">{{ property.max_guests }} guests</div>
            </div>
            <div class="price">${{ property.price_per_night }}</div>
          </div>
        </article>
        {% endfor %}
      </section>
      {% else %}
      <div class="empty">
        <h2>No active listings yet.</h2>
        <p>Add properties to see them appear here.</p>
      </div>
      {% endif %}
    </main>

    <script src="{% static 'property_grid.js' %}"></script>
  </body>
</html>
